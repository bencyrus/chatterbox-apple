---
description: Voice recording with AVFoundation; privacy, UX, and storage rules.
globs: ["**/*.swift"]
alwaysApply: true
---

# Session & Framework

- Use AVFoundation (`AVAudioSession`, `AVAudioRecorder`, or `AVAudioEngine`).
- Set category `.playAndRecord` only during recording; restore after.

# Format & Storage

- Default AAC/M4A, 44.1kHz or 48kHz, mono unless requirements specify otherwise.
- Save to app container in a managed directory; sanitize filenames.

# UX

- Clear recording state, elapsed time, and levels if feasible.
- Handle interruptions (e.g., calls) gracefully.

# Privacy

- Do not retain recordings without user intent; provide delete/export.
